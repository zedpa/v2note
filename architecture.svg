<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900" font-family="'Segoe UI', 'Microsoft YaHei', sans-serif">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0f172a"/>
      <stop offset="100%" style="stop-color:#1e293b"/>
    </linearGradient>
    <linearGradient id="orange" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f97316"/>
      <stop offset="100%" style="stop-color:#fb923c"/>
    </linearGradient>
    <linearGradient id="blue" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#3b82f6"/>
      <stop offset="100%" style="stop-color:#60a5fa"/>
    </linearGradient>
    <linearGradient id="green" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10b981"/>
      <stop offset="100%" style="stop-color:#34d399"/>
    </linearGradient>
    <linearGradient id="purple" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b5cf6"/>
      <stop offset="100%" style="stop-color:#a78bfa"/>
    </linearGradient>
    <linearGradient id="pink" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#ec4899"/>
      <stop offset="100%" style="stop-color:#f472b6"/>
    </linearGradient>
    <linearGradient id="teal" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#14b8a6"/>
      <stop offset="100%" style="stop-color:#2dd4bf"/>
    </linearGradient>
    <linearGradient id="amber" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f59e0b"/>
      <stop offset="100%" style="stop-color:#fbbf24"/>
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.3"/>
    </filter>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <marker id="arrowOrange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#f97316"/>
    </marker>
    <marker id="arrowBlue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#3b82f6"/>
    </marker>
    <marker id="arrowGreen" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#10b981"/>
    </marker>
    <marker id="arrowPurple" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#8b5cf6"/>
    </marker>
    <marker id="arrowGray" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1200" height="900" fill="url(#bgGrad)" rx="12"/>

  <!-- Title -->
  <text x="600" y="42" text-anchor="middle" fill="#f8fafc" font-size="22" font-weight="bold">v2note ç³»ç»Ÿæ¶æ„å›¾</text>
  <text x="600" y="64" text-anchor="middle" fill="#94a3b8" font-size="13">Next.js 16 + Capacitor 8 + Supabase + AI</text>

  <!-- ==================== å®¢æˆ·ç«¯å±‚ ==================== -->
  <rect x="30" y="82" width="760" height="520" rx="10" fill="none" stroke="#334155" stroke-width="1.5" stroke-dasharray="6,3"/>
  <rect x="42" y="74" width="100" height="20" rx="4" fill="#1e293b"/>
  <text x="92" y="88" text-anchor="middle" fill="#94a3b8" font-size="11" font-weight="600">å®¢æˆ·ç«¯</text>

  <!-- å¹³å°å±‚ -->
  <rect x="50" y="100" width="220" height="48" rx="8" fill="#1e293b" stroke="#f97316" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="160" y="121" text-anchor="middle" fill="url(#orange)" font-size="13" font-weight="bold">ğŸ“± Capacitor 8</text>
  <text x="160" y="138" text-anchor="middle" fill="#94a3b8" font-size="10">Android / iOS åŸç”Ÿå£³</text>

  <rect x="290" y="100" width="220" height="48" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="400" y="121" text-anchor="middle" fill="url(#blue)" font-size="13" font-weight="bold">âš¡ Next.js 16</text>
  <text x="400" y="138" text-anchor="middle" fill="#94a3b8" font-size="10">é™æ€å¯¼å‡º (SSG) â†’ out/</text>

  <rect x="530" y="100" width="240" height="48" rx="8" fill="#1e293b" stroke="#8b5cf6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="650" y="121" text-anchor="middle" fill="url(#purple)" font-size="13" font-weight="bold">ğŸ¨ shadcn/ui + Tailwind</text>
  <text x="650" y="138" text-anchor="middle" fill="#94a3b8" font-size="10">Radix UI åŸè¯­ Â· æš—è‰²/äº®è‰²ä¸»é¢˜</text>

  <!-- ä¸»é¡µé¢ page.tsx -->
  <rect x="50" y="168" width="730" height="56" rx="8" fill="#1e293b" stroke="#475569" stroke-width="1" filter="url(#shadow)"/>
  <text x="415" y="192" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="bold">app/page.tsx â€” ä¸»é¡µé¢ï¼ˆçŠ¶æ€ç®¡ç†ä¸­å¿ƒï¼‰</text>
  <text x="415" y="210" text-anchor="middle" fill="#64748b" font-size="10">activeFilter Â· detailId Â· showSearch Â· showProfile Â· showTextEditor</text>

  <!-- ç»„ä»¶è¡Œ1: Header + å†…å®¹è§†å›¾ -->
  <rect x="50" y="240" width="170" height="72" rx="8" fill="#1e293b" stroke="#f97316" stroke-width="1" filter="url(#shadow)"/>
  <text x="135" y="262" text-anchor="middle" fill="#fb923c" font-size="12" font-weight="bold">NewHeader</text>
  <text x="135" y="278" text-anchor="middle" fill="#94a3b8" font-size="9">ç­›é€‰è¯ç‰‡</text>
  <text x="135" y="291" text-anchor="middle" fill="#64748b" font-size="9">å…¨éƒ¨|å¾…åŠ|çµæ„Ÿ|æ ‡ç­¾</text>
  <text x="135" y="304" text-anchor="middle" fill="#64748b" font-size="9">æœç´¢ Â· å¤´åƒ</text>

  <rect x="232" y="240" width="170" height="72" rx="8" fill="#1e293b" stroke="#10b981" stroke-width="1" filter="url(#shadow)"/>
  <text x="317" y="262" text-anchor="middle" fill="#34d399" font-size="12" font-weight="bold">NotesTree</text>
  <text x="317" y="278" text-anchor="middle" fill="#94a3b8" font-size="9">å±‚çº§æ ‘è§†å›¾</text>
  <text x="317" y="291" text-anchor="middle" fill="#64748b" font-size="9">å¹´â†’æœˆâ†’å‘¨â†’æ—¥</text>
  <text x="317" y="304" text-anchor="middle" fill="#64748b" font-size="9">ReviewNode å¤ç›˜èŠ‚ç‚¹</text>

  <rect x="414" y="240" width="116" height="72" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="1" filter="url(#shadow)"/>
  <text x="472" y="262" text-anchor="middle" fill="#60a5fa" font-size="12" font-weight="bold">TodoView</text>
  <text x="472" y="280" text-anchor="middle" fill="#94a3b8" font-size="9">å¾…åŠåˆ—è¡¨</text>
  <text x="472" y="296" text-anchor="middle" fill="#64748b" font-size="9">âœ“ ä¹è§‚æ›´æ–°</text>

  <rect x="542" y="240" width="116" height="72" rx="8" fill="#1e293b" stroke="#f59e0b" stroke-width="1" filter="url(#shadow)"/>
  <text x="600" y="262" text-anchor="middle" fill="#fbbf24" font-size="12" font-weight="bold">IdeaView</text>
  <text x="600" y="280" text-anchor="middle" fill="#94a3b8" font-size="9">çµæ„Ÿåˆ—è¡¨</text>
  <text x="600" y="296" text-anchor="middle" fill="#64748b" font-size="9">ğŸ’¡ åˆ›æ„å¡ç‰‡</text>

  <rect x="670" y="240" width="110" height="72" rx="8" fill="#1e293b" stroke="#ec4899" stroke-width="1" filter="url(#shadow)"/>
  <text x="725" y="258" text-anchor="middle" fill="#f472b6" font-size="11" font-weight="bold">Record</text>
  <text x="725" y="272" text-anchor="middle" fill="#f472b6" font-size="11" font-weight="bold">Button</text>
  <text x="725" y="290" text-anchor="middle" fill="#94a3b8" font-size="9">å½•éŸ³æŒ‰é’®</text>
  <text x="725" y="303" text-anchor="middle" fill="#64748b" font-size="9">é•¿æŒ‰Â·é”å®šÂ·æ³¢å½¢</text>

  <!-- Overlay è¡Œ -->
  <rect x="50" y="328" width="730" height="16" rx="4" fill="#0f172a"/>
  <text x="415" y="340" text-anchor="middle" fill="#475569" font-size="10">å…¨å± Overlay å±‚</text>

  <rect x="50" y="352" width="170" height="52" rx="8" fill="#1e293b" stroke="#8b5cf6" stroke-width="1" filter="url(#shadow)"/>
  <text x="135" y="374" text-anchor="middle" fill="#a78bfa" font-size="12" font-weight="bold">NoteDetail</text>
  <text x="135" y="392" text-anchor="middle" fill="#64748b" font-size="9">è¯¦æƒ…Â·ç¼–è¾‘Â·æ ‡ç­¾Â·å¾…åŠÂ·çµæ„Ÿ</text>

  <rect x="232" y="352" width="170" height="52" rx="8" fill="#1e293b" stroke="#14b8a6" stroke-width="1" filter="url(#shadow)"/>
  <text x="317" y="374" text-anchor="middle" fill="#2dd4bf" font-size="12" font-weight="bold">SearchView</text>
  <text x="317" y="392" text-anchor="middle" fill="#64748b" font-size="9">å…¨æ–‡æœç´¢ Â· é˜²æŠ– Â· å³æ»‘è¿”å›</text>

  <rect x="414" y="352" width="170" height="52" rx="8" fill="#1e293b" stroke="#f97316" stroke-width="1" filter="url(#shadow)"/>
  <text x="499" y="374" text-anchor="middle" fill="#fb923c" font-size="12" font-weight="bold">TextEditor</text>
  <text x="499" y="392" text-anchor="middle" fill="#64748b" font-size="9">æ‰‹åŠ¨ç¬”è®° Â· å¯é€‰AIåˆ†æ</text>

  <rect x="596" y="352" width="184" height="52" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="1" filter="url(#shadow)"/>
  <text x="688" y="374" text-anchor="middle" fill="#60a5fa" font-size="12" font-weight="bold">ProfileOverlay</text>
  <text x="688" y="392" text-anchor="middle" fill="#64748b" font-size="9">ä¸»é¢˜Â·ç»Ÿè®¡Â·å¯¼å‡ºÂ·è®¾ç½®</text>

  <!-- Hooks å±‚ -->
  <rect x="50" y="420" width="730" height="80" rx="8" fill="#0f172a" stroke="#334155" stroke-width="1"/>
  <text x="70" y="440" fill="#94a3b8" font-size="11" font-weight="600">Hooks å±‚</text>

  <!-- Hook pills -->
  <rect x="60" y="450" width="90" height="22" rx="11" fill="#1e3a5f"/>
  <text x="105" y="465" text-anchor="middle" fill="#60a5fa" font-size="9">useNotes</text>

  <rect x="158" y="450" width="100" height="22" rx="11" fill="#1e3a5f"/>
  <text x="208" y="465" text-anchor="middle" fill="#60a5fa" font-size="9">useNotesTree</text>

  <rect x="266" y="450" width="100" height="22" rx="11" fill="#1e3a5f"/>
  <text x="316" y="465" text-anchor="middle" fill="#60a5fa" font-size="9">useNoteDetail</text>

  <rect x="374" y="450" width="86" height="22" rx="11" fill="#1e3a5f"/>
  <text x="417" y="465" text-anchor="middle" fill="#60a5fa" font-size="9">useReviews</text>

  <rect x="468" y="450" width="78" height="22" rx="11" fill="#1e3a5f"/>
  <text x="507" y="465" text-anchor="middle" fill="#60a5fa" font-size="9">useTodos</text>

  <rect x="554" y="450" width="74" height="22" rx="11" fill="#1e3a5f"/>
  <text x="591" y="465" text-anchor="middle" fill="#60a5fa" font-size="9">useTags</text>

  <rect x="636" y="450" width="80" height="22" rx="11" fill="#1e3a5f"/>
  <text x="676" y="465" text-anchor="middle" fill="#60a5fa" font-size="9">useSearch</text>

  <rect x="60" y="478" width="110" height="22" rx="11" fill="#2d1f3d"/>
  <text x="115" y="493" text-anchor="middle" fill="#a78bfa" font-size="9">useAudioRecorder</text>

  <rect x="178" y="478" width="86" height="22" rx="11" fill="#2d1f3d"/>
  <text x="221" y="493" text-anchor="middle" fill="#a78bfa" font-size="9">useShake</text>

  <rect x="272" y="478" width="90" height="22" rx="11" fill="#2d1f3d"/>
  <text x="317" y="493" text-anchor="middle" fill="#a78bfa" font-size="9">useLocation</text>

  <rect x="370" y="478" width="90" height="22" rx="11" fill="#2d1f3d"/>
  <text x="415" y="493" text-anchor="middle" fill="#a78bfa" font-size="9">useNetwork</text>

  <rect x="468" y="478" width="100" height="22" rx="11" fill="#2d1f3d"/>
  <text x="518" y="493" text-anchor="middle" fill="#a78bfa" font-size="9">useNoteEditor</text>

  <!-- Lib å·¥å…·å±‚ -->
  <rect x="50" y="516" width="730" height="76" rx="8" fill="#0f172a" stroke="#334155" stroke-width="1"/>
  <text x="70" y="536" fill="#94a3b8" font-size="11" font-weight="600">Lib å·¥å…·å±‚</text>

  <rect x="60" y="546" width="72" height="22" rx="11" fill="#1a2e1a"/>
  <text x="96" y="561" text-anchor="middle" fill="#34d399" font-size="9">upload</text>

  <rect x="140" y="546" width="72" height="22" rx="11" fill="#1a2e1a"/>
  <text x="176" y="561" text-anchor="middle" fill="#34d399" font-size="9">process</text>

  <rect x="220" y="546" width="86" height="22" rx="11" fill="#1a2e1a"/>
  <text x="263" y="561" text-anchor="middle" fill="#34d399" font-size="9">manual-note</text>

  <rect x="314" y="546" width="90" height="22" rx="11" fill="#1a2e1a"/>
  <text x="359" y="561" text-anchor="middle" fill="#34d399" font-size="9">tag-manager</text>

  <rect x="412" y="546" width="70" height="22" rx="11" fill="#1a2e1a"/>
  <text x="447" y="561" text-anchor="middle" fill="#34d399" font-size="9">device</text>

  <rect x="490" y="546" width="74" height="22" rx="11" fill="#1a2e1a"/>
  <text x="527" y="561" text-anchor="middle" fill="#34d399" font-size="9">storage</text>

  <rect x="572" y="546" width="82" height="22" rx="11" fill="#1a2e1a"/>
  <text x="613" y="561" text-anchor="middle" fill="#34d399" font-size="9">local-cache</text>

  <rect x="662" y="546" width="106" height="22" rx="11" fill="#1a2e1a"/>
  <text x="715" y="561" text-anchor="middle" fill="#34d399" font-size="9">upload-queue</text>

  <rect x="60" y="572" width="72" height="22" rx="11" fill="#1a2e1a"/>
  <text x="96" y="587" text-anchor="middle" fill="#34d399" font-size="9">export</text>

  <rect x="140" y="572" width="80" height="22" rx="11" fill="#1a2e1a"/>
  <text x="180" y="587" text-anchor="middle" fill="#34d399" font-size="9">settings</text>

  <rect x="228" y="572" width="96" height="22" rx="11" fill="#1a2e1a"/>
  <text x="276" y="587" text-anchor="middle" fill="#34d399" font-size="9">subscription</text>

  <rect x="332" y="572" width="70" height="22" rx="11" fill="#1a2e1a"/>
  <text x="367" y="587" text-anchor="middle" fill="#34d399" font-size="9">events</text>

  <rect x="410" y="572" width="72" height="22" rx="11" fill="#1a2e1a"/>
  <text x="446" y="587" text-anchor="middle" fill="#34d399" font-size="9">supabase</text>

  <!-- ==================== æœåŠ¡ç«¯å±‚ ==================== -->
  <rect x="30" y="614" width="1140" height="268" rx="10" fill="none" stroke="#334155" stroke-width="1.5" stroke-dasharray="6,3"/>
  <rect x="42" y="606" width="100" height="20" rx="4" fill="#1e293b"/>
  <text x="92" y="620" text-anchor="middle" fill="#94a3b8" font-size="11" font-weight="600">æœåŠ¡ç«¯</text>

  <!-- Supabase -->
  <rect x="50" y="638" width="340" height="228" rx="8" fill="#1e293b" stroke="#10b981" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="220" y="662" text-anchor="middle" fill="url(#green)" font-size="14" font-weight="bold">Supabase</text>

  <!-- Edge Functions -->
  <rect x="66" y="676" width="150" height="52" rx="6" fill="#0f172a" stroke="#10b981" stroke-width="0.8"/>
  <text x="141" y="696" text-anchor="middle" fill="#34d399" font-size="11" font-weight="bold">process_audio</text>
  <text x="141" y="712" text-anchor="middle" fill="#64748b" font-size="9">ASR + AI åˆ†æ</text>

  <rect x="224" y="676" width="150" height="52" rx="6" fill="#0f172a" stroke="#10b981" stroke-width="0.8"/>
  <text x="299" y="696" text-anchor="middle" fill="#34d399" font-size="11" font-weight="bold">generate_review</text>
  <text x="299" y="712" text-anchor="middle" fill="#64748b" font-size="9">æ—¥/å‘¨/æœˆ/å¹´å¤ç›˜</text>

  <!-- Database -->
  <rect x="66" y="740" width="308" height="114" rx="6" fill="#0f172a" stroke="#475569" stroke-width="0.8"/>
  <text x="220" y="760" text-anchor="middle" fill="#e2e8f0" font-size="11" font-weight="bold">PostgreSQL æ•°æ®åº“</text>

  <!-- DB Tables as small pills -->
  <rect x="78" y="770" width="64" height="20" rx="10" fill="#1e3a2a"/>
  <text x="110" y="784" text-anchor="middle" fill="#6ee7b7" font-size="9">device</text>

  <rect x="150" y="770" width="60" height="20" rx="10" fill="#1e3a2a"/>
  <text x="180" y="784" text-anchor="middle" fill="#6ee7b7" font-size="9">record</text>

  <rect x="218" y="770" width="72" height="20" rx="10" fill="#1e3a2a"/>
  <text x="254" y="784" text-anchor="middle" fill="#6ee7b7" font-size="9">transcript</text>

  <rect x="298" y="770" width="70" height="20" rx="10" fill="#1e3a2a"/>
  <text x="333" y="784" text-anchor="middle" fill="#6ee7b7" font-size="9">summary</text>

  <rect x="78" y="796" width="48" height="20" rx="10" fill="#1e3a2a"/>
  <text x="102" y="810" text-anchor="middle" fill="#6ee7b7" font-size="9">tag</text>

  <rect x="134" y="796" width="48" height="20" rx="10" fill="#1e3a2a"/>
  <text x="158" y="810" text-anchor="middle" fill="#6ee7b7" font-size="9">todo</text>

  <rect x="190" y="796" width="48" height="20" rx="10" fill="#1e3a2a"/>
  <text x="214" y="810" text-anchor="middle" fill="#6ee7b7" font-size="9">idea</text>

  <rect x="246" y="796" width="60" height="20" rx="10" fill="#1e3a2a"/>
  <text x="276" y="810" text-anchor="middle" fill="#6ee7b7" font-size="9">review</text>

  <rect x="314" y="796" width="48" height="20" rx="10" fill="#1e3a2a"/>
  <text x="338" y="810" text-anchor="middle" fill="#6ee7b7" font-size="9">r_tag</text>

  <!-- Storage bucket -->
  <rect x="78" y="824" width="148" height="20" rx="10" fill="#1e2a3a"/>
  <text x="152" y="838" text-anchor="middle" fill="#7dd3fc" font-size="9">Storage: audio-recordings</text>

  <!-- AI æœåŠ¡ -->
  <rect x="420" y="638" width="340" height="228" rx="8" fill="#1e293b" stroke="#8b5cf6" stroke-width="1.5" filter="url(#shadow)"/>
  <text x="590" y="662" text-anchor="middle" fill="url(#purple)" font-size="14" font-weight="bold">AI æœåŠ¡</text>

  <rect x="436" y="676" width="308" height="68" rx="6" fill="#0f172a" stroke="#8b5cf6" stroke-width="0.8"/>
  <text x="590" y="698" text-anchor="middle" fill="#a78bfa" font-size="12" font-weight="bold">DashScope ASR</text>
  <text x="590" y="714" text-anchor="middle" fill="#64748b" font-size="10">è¯­éŸ³è¯†åˆ« (å¼‚æ­¥: æäº¤ä»»åŠ¡ â†’ è½®è¯¢ç»“æœ)</text>
  <text x="590" y="730" text-anchor="middle" fill="#475569" font-size="9">POST æäº¤ â†’ GET è½®è¯¢ â†’ SUCCEEDED</text>

  <rect x="436" y="756" width="308" height="100" rx="6" fill="#0f172a" stroke="#8b5cf6" stroke-width="0.8"/>
  <text x="590" y="778" text-anchor="middle" fill="#a78bfa" font-size="12" font-weight="bold">Qwen-plus (é€šä¹‰åƒé—®)</text>
  <text x="590" y="796" text-anchor="middle" fill="#64748b" font-size="10">AI å†…å®¹åˆ†æ Â· JSON ç»“æ„åŒ–è¾“å‡º</text>

  <rect x="452" y="808" width="56" height="18" rx="9" fill="#2d1f3d"/>
  <text x="480" y="820" text-anchor="middle" fill="#c4b5fd" font-size="8">æ ‡é¢˜</text>
  <rect x="514" y="808" width="56" height="18" rx="9" fill="#2d1f3d"/>
  <text x="542" y="820" text-anchor="middle" fill="#c4b5fd" font-size="8">æ‘˜è¦</text>
  <rect x="576" y="808" width="56" height="18" rx="9" fill="#2d1f3d"/>
  <text x="604" y="820" text-anchor="middle" fill="#c4b5fd" font-size="8">æ ‡ç­¾</text>
  <rect x="638" y="808" width="56" height="18" rx="9" fill="#2d1f3d"/>
  <text x="666" y="820" text-anchor="middle" fill="#c4b5fd" font-size="8">å¾…åŠ</text>
  <rect x="700" y="808" width="56" height="18" rx="9" fill="#2d1f3d"/>
  <text x="728" y="820" text-anchor="middle" fill="#c4b5fd" font-size="8">çµæ„Ÿ</text>

  <rect x="452" y="832" width="136" height="18" rx="9" fill="#2d1f3d"/>
  <text x="520" y="844" text-anchor="middle" fill="#c4b5fd" font-size="8">è§’è‰²é€‚é… (ç®¡ç†è€…/åˆ›ä½œè€…)</text>

  <!-- æ¶æ„æ¨¡å¼ -->
  <rect x="790" y="82" width="380" height="520" rx="10" fill="none" stroke="#334155" stroke-width="1.5" stroke-dasharray="6,3"/>
  <rect x="802" y="74" width="100" height="20" rx="4" fill="#1e293b"/>
  <text x="852" y="88" text-anchor="middle" fill="#94a3b8" font-size="11" font-weight="600">æ¶æ„æ¨¡å¼</text>

  <!-- Pattern cards -->
  <rect x="806" y="102" width="350" height="60" rx="6" fill="#1e293b" stroke="#f97316" stroke-width="0.8"/>
  <text x="822" y="122" fill="#fb923c" font-size="11" font-weight="bold">ğŸ”„ äº‹ä»¶é©±åŠ¨é€šä¿¡</text>
  <text x="822" y="138" fill="#94a3b8" font-size="9">events.ts å…¨å±€äº‹ä»¶æ€»çº¿</text>
  <text x="822" y="152" fill="#64748b" font-size="9">emit("recording:processed") â†’ Hooks è‡ªåŠ¨åˆ·æ–°</text>

  <rect x="806" y="172" width="350" height="60" rx="6" fill="#1e293b" stroke="#3b82f6" stroke-width="0.8"/>
  <text x="822" y="192" fill="#60a5fa" font-size="11" font-weight="bold">ğŸ“¡ è½®è¯¢ + æœ¬åœ°ç¼“å­˜</text>
  <text x="822" y="208" fill="#94a3b8" font-size="9">useNotes: å¤„ç†ä¸­ç¬”è®° 5s è½®è¯¢</text>
  <text x="822" y="222" fill="#64748b" font-size="9">local-cache: 30åˆ†é’Ÿ TTL ç¦»çº¿æ”¯æŒ</text>

  <rect x="806" y="242" width="350" height="60" rx="6" fill="#1e293b" stroke="#10b981" stroke-width="0.8"/>
  <text x="822" y="262" fill="#34d399" font-size="11" font-weight="bold">âš¡ ä¹è§‚æ›´æ–°</text>
  <text x="822" y="278" fill="#94a3b8" font-size="9">todos/tags å…ˆæ›´æ–° UI å†åŒæ­¥æœåŠ¡ç«¯</text>
  <text x="822" y="292" fill="#64748b" font-size="9">å¤±è´¥å›æ»š Â· upload-queue é‡è¯•é˜Ÿåˆ—</text>

  <rect x="806" y="312" width="350" height="60" rx="6" fill="#1e293b" stroke="#8b5cf6" stroke-width="0.8"/>
  <text x="822" y="332" fill="#a78bfa" font-size="11" font-weight="bold">ğŸ” è®¾å¤‡èº«ä»½è®¤è¯</text>
  <text x="822" y="348" fill="#94a3b8" font-size="9">æ— éœ€ç™»å½• Â· Capacitor Device ID</text>
  <text x="822" y="362" fill="#64748b" font-size="9">Web ç«¯ localStorage UUID é™çº§</text>

  <rect x="806" y="382" width="350" height="60" rx="6" fill="#1e293b" stroke="#ec4899" stroke-width="0.8"/>
  <text x="822" y="402" fill="#f472b6" font-size="11" font-weight="bold">ğŸŒ è·¨å¹³å°å…¼å®¹</text>
  <text x="822" y="418" fill="#94a3b8" font-size="9">Capacitor æ’ä»¶åŠ¨æ€å¯¼å…¥ (é¿å… Web å´©æºƒ)</text>
  <text x="822" y="432" fill="#64748b" font-size="9">storage.ts / device.ts Web é™çº§æ–¹æ¡ˆ</text>

  <rect x="806" y="452" width="350" height="60" rx="6" fill="#1e293b" stroke="#f59e0b" stroke-width="0.8"/>
  <text x="822" y="472" fill="#fbbf24" font-size="11" font-weight="bold">ğŸ“Š å±‚çº§å¤ç›˜ç³»ç»Ÿ</text>
  <text x="822" y="488" fill="#94a3b8" font-size="9">æ—¥ â†’ å‘¨ â†’ æœˆ â†’ å¹´ å››çº§ AI æ€»ç»“</text>
  <text x="822" y="502" fill="#64748b" font-size="9">è§’è‰²é€‚é…: ç®¡ç†è€…(KPI/äººå‘˜) Â· åˆ›ä½œè€…(çµæ„Ÿ)</text>

  <rect x="806" y="522" width="350" height="68" rx="6" fill="#1e293b" stroke="#14b8a6" stroke-width="0.8"/>
  <text x="822" y="542" fill="#2dd4bf" font-size="11" font-weight="bold">ğŸ’° å…è´¹é¢åº¦æ§åˆ¶</text>
  <text x="822" y="558" fill="#94a3b8" font-size="9">subscription.ts ä½¿ç”¨é‡è¿½è¸ª</text>
  <text x="822" y="572" fill="#64748b" font-size="9">30æ¬¡å½•éŸ³/æœˆ Â· 10æ¬¡AI/æœˆ Â· 500MBå­˜å‚¨</text>
  <text x="822" y="582" fill="#475569" font-size="8">è¶…é¢é™çº§ â†’ æç¤ºå‡çº§</text>

  <!-- æ•°æ®æµè¿æ¥ç®­å¤´ -->
  <!-- å®¢æˆ·ç«¯ â†’ Supabase -->
  <line x1="415" y1="596" x2="220" y2="638" stroke="#10b981" stroke-width="1.5" marker-end="url(#arrowGreen)" opacity="0.7"/>
  <text x="290" y="615" fill="#10b981" font-size="9" transform="rotate(-12, 290, 615)">API è°ƒç”¨</text>

  <!-- Supabase â†’ AI -->
  <line x1="390" y1="702" x2="436" y2="710" stroke="#8b5cf6" stroke-width="1.5" marker-end="url(#arrowPurple)" opacity="0.7"/>
  <text x="410" y="696" fill="#8b5cf6" font-size="9">è°ƒç”¨</text>

  <!-- AI â†’ DB (results) -->
  <path d="M436,800 Q400,820 374,810" fill="none" stroke="#64748b" stroke-width="1" marker-end="url(#arrowGray)" stroke-dasharray="4,2" opacity="0.5"/>
  <text x="398" y="826" fill="#64748b" font-size="8">å†™å›ç»“æœ</text>

  <!-- å³ä¾§: æ•°æ®æµå‘è¯´æ˜ -->
  <rect x="790" y="638" width="380" height="228" rx="8" fill="#1e293b" stroke="#475569" stroke-width="1" filter="url(#shadow)"/>
  <text x="980" y="662" text-anchor="middle" fill="#e2e8f0" font-size="13" font-weight="bold">æ ¸å¿ƒæ•°æ®æµ</text>

  <!-- Flow 1: Recording -->
  <rect x="806" y="674" width="12" height="12" rx="6" fill="#ec4899"/>
  <text x="826" y="685" fill="#f472b6" font-size="10" font-weight="bold">å½•éŸ³æµç¨‹</text>
  <text x="826" y="700" fill="#94a3b8" font-size="9">å½•éŸ³ â†’ base64 â†’ Storageä¸Šä¼  â†’ åˆ›å»ºrecord</text>
  <text x="826" y="713" fill="#64748b" font-size="9">â†’ invoke(process_audio) â†’ ASR+AI â†’ å†™å…¥DB</text>
  <text x="826" y="726" fill="#475569" font-size="9">â†’ emitäº‹ä»¶ â†’ UIåˆ·æ–°</text>

  <!-- Flow 2: Manual -->
  <rect x="806" y="738" width="12" height="12" rx="6" fill="#f59e0b"/>
  <text x="826" y="749" fill="#fbbf24" font-size="10" font-weight="bold">æ‰‹åŠ¨ç¬”è®°</text>
  <text x="826" y="764" fill="#94a3b8" font-size="9">æ–‡æœ¬è¾“å…¥ â†’ åˆ›å»ºrecord+transcript</text>
  <text x="826" y="777" fill="#64748b" font-size="9">â†’ å¯é€‰AIåˆ†æ â†’ å†™å…¥DB â†’ emit â†’ åˆ·æ–°</text>

  <!-- Flow 3: Review -->
  <rect x="806" y="792" width="12" height="12" rx="6" fill="#8b5cf6"/>
  <text x="826" y="803" fill="#a78bfa" font-size="10" font-weight="bold">å¤ç›˜ç”Ÿæˆ</text>
  <text x="826" y="818" fill="#94a3b8" font-size="9">é€‰æ‹©æ—¶é—´èŒƒå›´ â†’ invoke(generate_review)</text>
  <text x="826" y="831" fill="#64748b" font-size="9">â†’ èšåˆè¯¥æœŸé—´ç¬”è®° â†’ Qwen AIæ€»ç»“</text>
  <text x="826" y="844" fill="#475569" font-size="9">â†’ upsert reviewè¡¨ â†’ æ ‘èŠ‚ç‚¹åˆ·æ–°</text>

  <!-- Footer -->
  <text x="600" y="890" text-anchor="middle" fill="#475569" font-size="10">v2note â€” AI è¯­éŸ³ç¬”è®°åº”ç”¨ Â· 2026.02</text>
</svg>